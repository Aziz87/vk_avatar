(this.webpackJsonpavatar=this.webpackJsonpavatar||[]).push([[0],{245:function(e,t,n){e.exports=n.p+"static/media/persik.4e1ec840.png"},329:function(e,t,n){e.exports=n(628)},616:function(e,t,n){},628:function(e,t,n){"use strict";n.r(t);n(95),n(159),n(130),n(131),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196);var a=n(3),r=n.n(a),o=n(145),s=n.n(o),c=n(26),i=n.n(c),p=(n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(103),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(377),n(378),n(379),n(380),n(381),n(382),n(384),n(385),n(387),n(388),n(389),n(390),n(391),n(392),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(400),n(401),n(402),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(410),n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(430),n(431),n(432),n(433),n(434),n(435),n(436),n(437),n(438),n(439),n(440),n(441),n(442),n(443),n(444),n(445),n(446),n(447),n(448),n(449),n(451),n(452),n(453),n(454),n(455),n(456),n(457),n(458),n(459),n(460),n(461),n(462),n(463),n(464),n(465),n(466),n(467),n(468),n(469),n(470),n(471),n(472),n(473),n(474),n(475),n(476),n(477),n(478),n(479),n(480),n(481),n(482),n(483),n(484),n(485),n(486),n(487),n(488),n(489),n(490),n(491),n(492),n(493),n(494),n(495),n(497),n(498),n(499),n(500),n(501),n(502),n(503),n(504),n(505),n(506),n(507),n(508),n(509),n(510),n(511),n(512),n(513),n(514),n(515),n(516),n(517),n(518),n(519),n(520),n(521),n(522),n(523),n(524),n(525),n(526),n(527),n(528),n(529),n(142),n(530),n(531),n(532),n(533),n(534),n(535),n(536),n(538),n(539),n(540),n(541),n(542),n(543),n(544),n(545),n(546),n(547),n(548),n(549),n(550),n(551),n(552),n(553),n(555),n(556),n(557),n(558),n(559),n(560),n(561),n(562),n(563),n(564),n(565),n(566),n(567),n(568),n(570),n(571),n(572),n(573),n(574),n(575),n(576),n(577),n(578),n(579),n(580),n(581),n(582),n(583),n(584),n(586),n(227),n(41)),u=n.n(p),l=n(76),d=n(94),h=n(249),m=n.n(h),f=n(248),b=n.n(f),v=(n(588),n(589),n(242)),g=n.n(v),w=n(241),_=n.n(w),k=function(e){var t=e.id,n=e.go,a=e.fetchedUser,o=e.hash;return r.a.createElement("div",{id:t,style:{height:"100%",padding:"10px"}},a&&r.a.createElement("div",{style:{justifyContent:"center",display:"flex",padding:"10px",margin:"10px",alignItems:"center"}},r.a.createElement("img",{style:{width:"calc(95vmin)","border-radius":"3%"},alt:"img",src:o})),r.a.createElement(_.a,{title:"",style:{}},r.a.createElement(g.a,{size:"xl",level:"1",onClick:n,"data-to":"persik",style:{}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432 HD \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435")))},y=n(147),x=(n(246),n(146),n(247),n(243),n(244),n(245),n(616),Object(y.b)(),148056070);function A(){try{var e=decodeURIComponent(window.location.hash.split("#")[1]);return console.log({encoded:e}),e}catch(t){console.log(t)}}i.a.send("VKWebAppInit",{});var j=function(){var e=Object(a.useState)("home"),t=Object(d.a)(e,2),n=t[0],o=(t[1],Object(a.useState)(null)),s=Object(d.a)(o,2),c=s[0],p=s[1],h=Object(a.useState)(null),f=Object(d.a)(h,2),v=f[0],g=f[1],w=Object(a.useState)(r.a.createElement(b.a,{size:"large"})),_=Object(d.a)(w,2),y=_[0],j=_[1];function O(){return(O=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("init"),t={method:"groups.isMember",request_id:"test22",params:{v:"5.102",access_token:window.token,group_id:x}},console.log(t),e.next=5,i.a.sendPromise("VKWebAppCallAPIMethod",t);case 5:n=e.sent,console.log({isMember:n}),0===n.response&&i.a.send("VKWebAppJoinGroup",{group_id:x});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return P.apply(this,arguments)}function P(){return(P=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new Date).getTime()+Math.floor(1e5*Math.random()),t.random=n,i.a.send("VKWebAppSendPayload",{group_id:x,payload:t}),e.next=5,new Promise((function(e,t){var a=1;function r(){return o.apply(this,arguments)}function o(){return(o=Object(l.a)(u.a.mark((function o(){var s,c;return u.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return a++,console.warn("checking",a),o.next=4,i.a.sendPromise("VKWebAppCallAPIMethod",{method:"storage.get",request_id:n,params:{v:"5.102",access_token:window.token,key:"upload"}});case 4:s=o.sent,(c=JSON.parse(s.response)).random===n?e(c):a>20?t("Result not finded!"):setTimeout(r,350);case 7:case"end":return o.stop()}}),o)})))).apply(this,arguments)}r()}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(l.a)(u.a.mark((function e(){var t,n,a,r,o,s,c,p,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("ppposer21"),console.log(A()),e.next=4,i.a.sendPromise("VKWebAppCallAPIMethod",{method:"photos.getWallUploadServer",request_id:"32test",params:{v:"5.102",access_token:window.token}});case 4:return t=e.sent,console.log({upload_server:t}),n=t.response,a=n.upload_url,r=n.user_id,e.next=9,W({upload_url:a,user_id:r,photo:A()});case 9:return o=e.sent,console.log({upload:o}),e.next=13,i.a.sendPromise("VKWebAppCallAPIMethod",{method:"photos.saveWallPhoto",request_id:"33test",params:{v:"5.102",access_token:v,user_id:r,photo:o.photo,hash:o.hash,server:o.server,caption:"@art_privet(\u0410\u0440\u0442 \u0437\u0430 5 \u0441\u0435\u043a)"}});case 13:return s=e.sent,c=s.response[0],p=c.id,l=c.owner_id,d="photo"+l+"_"+p,e.next=18,i.a.sendPromise("VKWebAppShowWallPostBox",{message:"@art_privet(\u0410\u0440\u0442 \u0437\u0430 5 \u0441\u0435\u043a)",attachments:d});case 18:e.sent;case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return console.log("421"),Object(a.useEffect)((function(){function e(){return(e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.sendPromise("VKWebAppGetUserInfo");case 2:t=e.sent,p(t),j(null);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}i.a.subscribe((function(e){var t=e.detail,n=t.type,a=t.data;if("VKWebAppUpdateConfig"===n){var r=document.createAttribute("scheme");r.value=a.scheme?a.scheme:"client_light",document.body.attributes.setNamedItem(r)}"VKWebAppAccessTokenReceived"===n&&(g(a.access_token),window.token=a.access_token,function(){O.apply(this,arguments)}())})),i.a.send("VKWebAppGetAuthToken",{app_id:7177213,scope:"wall,photos"}),function(){e.apply(this,arguments)}()}),[]),r.a.createElement(m.a,{activePanel:n,popout:y},r.a.createElement(k,{id:"home",fetchedUser:c,go:function(){return K.apply(this,arguments)},hash:A()}))};i.a.send("VKWebAppInit"),s.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[329,1,2]]]);
//# sourceMappingURL=main.8c54ac02.chunk.js.map